# ADR-0003: 認証戦略の決定

## ステータス

採用

## 背景

メッセージボードにおけるユーザー識別の方法を決定する必要があった。セキュリティ、利便性、実装コストのバランスを考慮。

## 決定事項

**認証機能を実装せず、投稿時に名前を入力するのみとする。**

### 具体的な仕様
- ユーザー登録・ログイン機能なし
- 投稿時に名前フィールドに自由に入力
- 名前の重複チェックなし
- セッション管理なし

## 検討した選択肢

1. **認証なし（名前入力のみ）** ← 採用
2. 簡易認証（投稿時パスワード設定、編集・削除時に使用）
3. 完全なユーザー認証（ユーザー登録・ログイン）

## 理由

### 採用理由
- **シンプルさの重視**: プロジェクトの目的はシンプルなメッセージボード
- **実装コストの削減**: 認証機能は複雑性を大幅に増加させる
- **ユーザビリティ**: 登録不要で誰でもすぐに投稿可能
- **機能要件**: 編集・削除機能がないため、認証の必要性が低い

### 不採用理由
- **簡易認証**: 編集・削除機能がないため不要
- **完全な認証**: オーバーエンジニアリング、要件に対して過剰

## 結果

### 良い点
- 実装がシンプル
- ユーザーが登録なしで即座に利用可能
- セキュリティ脆弱性のリスクが低い（認証処理がないため）

### 悪い点
- なりすましが可能
- スパム対策が困難
- 不適切な投稿の削除にはDB直接操作が必要

### 今後の拡張性
将来的に認証が必要になった場合：
1. `messages`テーブルに`user_id`カラムを追加
2. `users`テーブルを新規作成
3. データアクセス層の変更のみで対応可能（アーキテクチャの分離により）

## セキュリティ上の考慮事項
- XSS対策: hono/htmlによる自動エスケープで対応
- SQLインジェクション対策: パラメータ化クエリで対応
- CSRF対策: 現時点では不要（セッション管理なし）
